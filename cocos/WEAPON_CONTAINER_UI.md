# æ­¦å™¨å®¹å™¨UIç»„ä»¶è¯´æ˜

## æ¦‚è¿°

`WeaponContainerUI` ç»„ä»¶è´Ÿè´£ç®¡ç†æ¸¸æˆåº•éƒ¨çš„æ­¦å™¨é€‰æ‹©ç•Œé¢ï¼ŒåŒ…æ‹¬æ˜¾ç¤ºå¯é€‰æ­¦å™¨å¡ç‰‡ã€å¤„ç†ç”¨æˆ·ç‚¹å‡»ç­‰ã€‚

## æ–‡ä»¶ä½ç½®

```
cocos/assets/scripts/ui/WeaponContainerUI.ts
```

## ä¸»è¦åŠŸèƒ½

### 1. æ­¦å™¨å¡ç‰‡æ˜¾ç¤º
- æ˜¾ç¤ºå¯é€‰æ‹©çš„æ­¦å™¨ç±»å‹ï¼ˆç«ç®­å¡”ã€æ¿€å…‰å¡”ï¼‰
- æ¯ä¸ªå¡ç‰‡åŒ…å«ï¼š
  - æ­¦å™¨å›¾æ ‡ï¼ˆemojiï¼‰
  - æ­¦å™¨åç§°
  - è´­ä¹°æˆæœ¬
  - ç‰¹è‰²è¾¹æ¡†å’ŒèƒŒæ™¯

### 2. äº¤äº’åŠŸèƒ½
- ç‚¹å‡»å¡ç‰‡é€‰æ‹©æ­¦å™¨
- æ£€æŸ¥é‡‘å¸æ˜¯å¦è¶³å¤Ÿ
- æ˜¾ç¤ºé€‰ä¸­çŠ¶æ€ï¼ˆå‘å…‰æ•ˆæœï¼‰

### 3. å¡ç‰‡å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¦å™¨å®¹å™¨ (800x200)                   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  ğŸš€     â”‚    â”‚  âš¡     â”‚         â”‚
â”‚  â”‚ ç«ç®­å¡”  â”‚    â”‚ æ¿€å…‰å¡”  â”‚         â”‚
â”‚  â”‚ ğŸ’° 120  â”‚    â”‚ ğŸ’° 100  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æ–¹æ³•

### åœ¨åœºæ™¯ä¸­è®¾ç½®

1. **åˆ›å»ºèŠ‚ç‚¹ç»“æ„**
   ```
   UI
   â””â”€â”€ WeaponContainer
       â””â”€â”€ [æŒ‚è½½ WeaponContainerUI ç»„ä»¶]
   ```

2. **åœ¨ UIManager ä¸­è‡ªåŠ¨åˆå§‹åŒ–**
   - UIManager ä¼šè‡ªåŠ¨åœ¨ `weaponContainer` èŠ‚ç‚¹ä¸Šæ·»åŠ  `WeaponContainerUI` ç»„ä»¶
   - è‡ªåŠ¨ä¼ å…¥ `GoldManager` å’Œ `WeaponManager` å¼•ç”¨

### ä»£ç é›†æˆ

```typescript
// UIManager ä¸­çš„åˆå§‹åŒ–
if (this.weaponContainer && this.goldManager && this.weaponManager) {
    this.weaponContainerUI = this.weaponContainer.getComponent(WeaponContainerUI);
    if (!this.weaponContainerUI) {
        this.weaponContainerUI = this.weaponContainer.addComponent(WeaponContainerUI);
    }
    this.weaponContainerUI.init(this.goldManager, this.weaponManager);
}
```

## API æ¥å£

### åˆå§‹åŒ–æ–¹æ³•

```typescript
init(goldManager: GoldManager, weaponManager: WeaponManager): void
```
- åˆå§‹åŒ–ç»„ä»¶ï¼Œä¼ å…¥é‡‘å¸ç®¡ç†å™¨å’Œæ­¦å™¨ç®¡ç†å™¨

### è·å–é€‰ä¸­æ­¦å™¨

```typescript
getSelectedWeaponType(): WeaponType | null
```
- è¿”å›å½“å‰é€‰ä¸­çš„æ­¦å™¨ç±»å‹
- å¦‚æœæ²¡æœ‰é€‰ä¸­è¿”å› null

### æ¸…é™¤é€‰ä¸­

```typescript
clearSelection(): void
```
- æ¸…é™¤å½“å‰çš„æ­¦å™¨é€‰æ‹©çŠ¶æ€

## æ­¦å™¨å¡ç‰‡é…ç½®

### ç«ç®­å¡”å¡ç‰‡
- **å›¾æ ‡**: ğŸš€
- **é¢œè‰²**: ç´«è‰² (0x9d00ff)
- **æˆæœ¬**: 120 é‡‘å¸
- **ä½ç½®**: å·¦ä¾§

### æ¿€å…‰å¡”å¡ç‰‡
- **å›¾æ ‡**: âš¡
- **é¢œè‰²**: ç»¿è‰² (0x00ff41)
- **æˆæœ¬**: 100 é‡‘å¸
- **ä½ç½®**: å³ä¾§

## å¡ç‰‡æ ·å¼

### èƒŒæ™¯å’Œè¾¹æ¡†
```typescript
// å¤–å‘å…‰ï¼ˆé€‰ä¸­æ—¶æ›´äº®ï¼‰
alpha: é€‰ä¸­ ? 80 : 30

// ä¸»èƒŒæ™¯
color: rgba(20, 20, 40, 230)

// è¾¹æ¡†é¢œè‰²
ä½¿ç”¨æ­¦å™¨é…ç½®ä¸­çš„é¢œè‰²ï¼ˆcolorHexï¼‰
```

### å¸ƒå±€å‚æ•°
```typescript
cardWidth: 180px
cardHeight: 140px
cardSpacing: 20px
startX: -containerWidth / 2 + 50
cardY: containerHeight / 2 - 70
```

## äº‹ä»¶æµç¨‹

### ç‚¹å‡»æ­¦å™¨å¡ç‰‡
1. æ£€æŸ¥é‡‘å¸æ˜¯å¦è¶³å¤Ÿ
2. å¦‚æœä¸å¤Ÿï¼Œæ˜¾ç¤ºæç¤º
3. å¦‚æœå¤Ÿï¼Œè®¾ç½®ä¸ºé€‰ä¸­çŠ¶æ€
4. æ›´æ–°æ‰€æœ‰å¡ç‰‡çš„è§†è§‰çŠ¶æ€

### é€‰ä¸­çŠ¶æ€å˜åŒ–
```typescript
onWeaponCardClick(weaponType) 
  â†’ æ£€æŸ¥é‡‘å¸
  â†’ è®¾ç½® selectedWeaponType
  â†’ updateCardSelection()
    â†’ éå†æ‰€æœ‰å¡ç‰‡
    â†’ é‡ç»˜é€‰ä¸­å¡ç‰‡ï¼ˆæ·»åŠ å¤–å‘å…‰ï¼‰
    â†’ é‡ç»˜æœªé€‰ä¸­å¡ç‰‡ï¼ˆæ­£å¸¸çŠ¶æ€ï¼‰
```

## ä¸å…¶ä»–ç³»ç»Ÿçš„äº¤äº’

### GoldManager
- æ£€æŸ¥ç©å®¶é‡‘å¸æ•°é‡
- åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿè´­ä¹°æ­¦å™¨

### WeaponManager
- å°†æ¥ä¼šç”¨äºå®é™…æ”¾ç½®æ­¦å™¨
- ä¼ é€’é€‰ä¸­çš„æ­¦å™¨ç±»å‹

### UIManager
- ç®¡ç† WeaponContainerUI çš„ç”Ÿå‘½å‘¨æœŸ
- è®¾ç½®å®¹å™¨çš„ä½ç½®å’Œå°ºå¯¸

## æ‰©å±•åŠŸèƒ½ï¼ˆå¾…å®ç°ï¼‰

### 1. æ‹–æ‹½æ”¾ç½®
- [ ] æ”¯æŒæ‹–æ‹½å¡ç‰‡åˆ°æˆ˜åœºæ”¾ç½®æ­¦å™¨
- [ ] æ˜¾ç¤ºæ”¾ç½®é¢„è§ˆ

### 2. æ­¦å™¨ä¿¡æ¯æç¤º
- [ ] æ‚¬åœæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- [ ] æ˜¾ç¤ºæ”»å‡»èŒƒå›´ã€ä¼¤å®³ç­‰å±æ€§

### 3. æ­¦å™¨å‡çº§/å‡ºå”®æŒ‰é’®
- [ ] æ˜¾ç¤ºé€‰ä¸­æ­¦å™¨çš„æ“ä½œæŒ‰é’®
- [ ] å‡çº§å’Œå‡ºå”®åŠŸèƒ½

### 4. åŠ¨ç”»æ•ˆæœ
- [ ] å¡ç‰‡å‡ºç°åŠ¨ç”»
- [ ] é€‰ä¸­æ—¶çš„è„‰å†²æ•ˆæœ
- [ ] é‡‘å¸ä¸è¶³æ—¶çš„æŠ–åŠ¨æ•ˆæœ

## è°ƒè¯•

### æ§åˆ¶å°æ—¥å¿—
```typescript
// é€‰ä¸­æ­¦å™¨æ—¶
console.log(`é€‰ä¸­æ­¦å™¨: ${config.name}`);

// é‡‘å¸ä¸è¶³æ—¶
console.log('é‡‘å¸ä¸è¶³ï¼');
```

## æ³¨æ„äº‹é¡¹

1. **ç»„ä»¶ä¾èµ–**
   - å¿…é¡»å…ˆåˆå§‹åŒ– GoldManager å’Œ WeaponManager
   - UIManager è´Ÿè´£ç®¡ç†åˆå§‹åŒ–é¡ºåº

2. **åæ ‡ç³»ç»Ÿ**
   - ä½¿ç”¨ç›¸å¯¹äº weaponContainer çš„æœ¬åœ°åæ ‡
   - é”šç‚¹è®¾ç½®ä¸º (0, 1) - å·¦ä¸Šè§’

3. **æ€§èƒ½ä¼˜åŒ–**
   - åªåœ¨é€‰ä¸­çŠ¶æ€å˜åŒ–æ—¶é‡ç»˜å¡ç‰‡
   - ä½¿ç”¨ Graphics ç»„ä»¶ç»˜åˆ¶ï¼Œé¿å…ä½¿ç”¨å›¾ç‰‡èµ„æº

## ç›¸å…³æ–‡ä»¶

- `GameConfig.ts` - æ­¦å™¨é…ç½®æ•°æ®
- `WeaponManager.ts` - æ­¦å™¨ç®¡ç†å™¨
- `GoldManager.ts` - é‡‘å¸ç®¡ç†å™¨
- `UIManager.ts` - UIç®¡ç†å™¨
